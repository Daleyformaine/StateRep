<!DOCTYPE html>
<html>
<head>
  <!-- Site made with Mobirise Website Builder v6.0.6, https://mobirise.com -->
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Mobirise v6.0.6, mobirise.com">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
  <link rel="icon" type="image/png" href="assets/images/screenshot202026-02-1120003244-94x85.png?v=1">
  <link rel="shortcut icon" type="image/png" href="assets/images/screenshot202026-02-1120003244-94x85.png?v=1">
  <meta name="description" content="">
  <title>Join the Fight</title>

  <link rel="stylesheet" href="assets/web/assets/mobirise-icons2/mobirise2.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="assets/web/assets/gdpr-plugin/gdpr-styles.css">
  <link rel="stylesheet" href="assets/animatecss/animate.css">
  <link rel="stylesheet" href="assets/dropdown/css/style.css">
  <link rel="stylesheet" href="assets/socicon/css/styles.css">
  <link rel="stylesheet" href="assets/theme/css/style.css">
  <link rel="preload" href="https://fonts.googleapis.com/css?family=Anek+Latin:100,200,300,400,500,600,700,800&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Anek+Latin:100,200,300,400,500,600,700,800&display=swap"></noscript>
  <link rel="preload" as="style" href="assets/mobirise/css/mbr-additional.css?v=19d8aE">
  <link rel="stylesheet" href="assets/mobirise/css/mbr-additional.css?v=19d8aE" type="text/css">

  <!-- Page 2 styles, SCOPED so Mobirise isn't affected -->
  <style>
    #profile-tool { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }

    #profile-tool .toolBody {
      margin: 0;
      padding: 24px;
      color: #fff;
      background: #0b1020 url("bg.jpg") center/cover no-repeat fixed;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.12);
    }

    /* Page UI logo (NOT part of the exported image) */
    #profile-tool .siteLogo {
      position: fixed;
      top: calc(20px + env(safe-area-inset-top));
      left: calc(20px + env(safe-area-inset-left));
      width: 140px;
      height: auto;
      z-index: 1000;
      filter: drop-shadow(0 8px 18px rgba(0,0,0,0.45));
      user-select: none;
      -webkit-user-drag: none;
      pointer-events: none;
    }

    /* Mobile layout */
    @media (max-width: 600px) {
      #profile-tool .toolBody {
        padding-top: calc(16px + env(safe-area-inset-top));
        padding-left: calc(16px + env(safe-area-inset-left));
        padding-right: calc(16px + env(safe-area-inset-right));
        padding-bottom: calc(16px + env(safe-area-inset-bottom));
        background-attachment: scroll;
      }
      #profile-tool .toolBody.hasLogo { padding-top: calc(120px + env(safe-area-inset-top)); }
      #profile-tool .siteLogo {
        top: calc(12px + env(safe-area-inset-top));
        left: calc(12px + env(safe-area-inset-left));
        width: 110px;
      }
    }

    #profile-tool .wrap { max-width: 820px; margin: 0 auto; display: grid; gap: 16px; }
    #profile-tool .card {
      background: rgba(7, 10, 22, 0.72);
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: 12px;
      padding: 16px;
      backdrop-filter: blur(10px);
    }
    #profile-tool h1 { margin: 0 0 10px; font-size: 18px; font-weight: 700; color: #fff; }
    #profile-tool .row { display: flex; flex-wrap: wrap; gap: 12px; align-items: center; justify-content: space-between; }
    #profile-tool .left { display: flex; flex-wrap: wrap; gap: 12px; align-items: center; }
    #profile-tool .small { font-size: 13px; opacity: 0.88; line-height: 1.35; }
    #profile-tool .error { font-size: 13px; color: #ffb4b4; white-space: pre-wrap; margin-top: 10px; }
    #profile-tool canvas {
      width: 100%; max-width: 560px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.22);
    }
    #profile-tool input[type="file"] { color: #fff; max-width: 260px; }
    #profile-tool .btn {
      cursor: pointer;
      border: 1px solid rgba(255,255,255,0.2);
      background: rgba(255,255,255,0.08);
      color: #fff;
      padding: 10px 12px;
      border-radius: 10px;
      font-weight: 650;
    }
    #profile-tool .btn:disabled { opacity: 0.5; cursor: not-allowed; }

    #profile-tool .toggleWrap { display: flex; flex-direction: column; gap: 6px; }
    #profile-tool .toggleRow { display: inline-flex; align-items: center; gap: 10px; user-select: none; }
    #profile-tool .pill {
      font-size: 12px; padding: 4px 8px; border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(255,255,255,0.08);
      opacity: 0.9;
    }
    #profile-tool .pill.on { opacity: 1; border-color: rgba(255,255,255,0.35); background: rgba(255,255,255,0.12); }
    #profile-tool .toggle {
      position: relative; width: 58px; height: 30px; border-radius: 999px;
      background: rgba(255,255,255,0.18);
      border: 1px solid rgba(255,255,255,0.22);
      cursor: pointer; flex: 0 0 auto;
    }
    #profile-tool .knob {
      position: absolute; top: 3px; left: 3px; width: 24px; height: 24px; border-radius: 999px;
      background: #fff; transition: transform 160ms ease;
    }
    #profile-tool .toggle[data-on="true"] .knob { transform: translateX(28px); }
    #profile-tool .hint { margin-top: 10px; }
  </style>
</head>

<body>

  <!-- KEEP: Mobirise header/menu -->
  <section data-bs-version="5.1" class="menu menu1 bootcampm5 cid-taHRfbmdPD" once="menu" id="amenu1-0">
    <nav class="navbar navbar-dropdown navbar-fixed-top navbar-expand-lg">
      <div class="container">
        <div class="navbar-brand">
          <span class="navbar-caption-wrap">
            <a class="navbar-caption text-white text-primary display-4"
               href="https://www.facebook.com/groups/880814651207993" target="_blank">
              Daley for District 10
            </a>
          </span>
        </div>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-bs-toggle="collapse"
                data-target="#navbarSupportedContent" data-bs-target="#navbarSupportedContent"
                aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
          <div class="hamburger">
            <span></span><span></span><span></span><span></span>
          </div>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav nav-dropdown nav-right" data-app-modern-menu="true">
            <li class="nav-item"><a class="nav-link link text-primary display-4" href="index.html">Home</a></li>
            <li class="nav-item"><a class="nav-link link text-primary display-4" href="about.html">About</a></li>
            <li class="nav-item"><a class="nav-link link text-primary display-4" href="policies.html">Policies</a></li>
            <li class="nav-item"><a class="nav-link link text-primary display-4" href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank">Donate</a></li>
            <li class="nav-item dropdown">
              <a class="nav-link link dropdown-toggle text-primary display-4"
                 href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank"
                 data-toggle="dropdown-submenu" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
                Join the Fight
              </a>
              <div class="dropdown-menu" aria-labelledby="dropdown-962">
                <a class="dropdown-item text-primary display-4" href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank">Volunteer</a>
                <a class="show dropdown-item text-primary display-4" href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank">X</a>
                <a class="show dropdown-item text-primary display-4" href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank">Facebook</a>
                <a class="show dropdown-item text-primary display-4" href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank">Instagram</a>
                <a class="text-primary show dropdown-item display-4" href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank">"Vote for Daley" Profile Pic</a>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </section>

  <!-- ONLY CONTENT: Page 2 tool -->
  <section data-bs-version="5.1" class="content5 bootcampm5" id="profile-tool">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-12 col-lg-10">
          <div class="toolBody">
            <img id="siteLogo" src="logo.png" class="siteLogo" alt="Logo" />

            <div class="wrap">
              <div class="card">
                <h1>Add this to your social media profile!</h1>

                <div class="row">
                  <div class="left">
                    <div>
                      <div class="small">Add your photo</div>
                      <div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-top:6px;">
                        <button class="btn" type="button" id="btnSelfie">Take Selfie</button>
                        <button class="btn" type="button" id="btnUpload">Upload Photo</button>
                      </div>
                      <input id="fileSelfie" type="file" accept="image/*" capture="user" style="display:none;" />
                      <input id="fileUpload" type="file" accept="image/*" style="display:none;" />
                    </div>

                    <div class="toggleWrap">
                      <div class="small">Style</div>
                      <div class="toggleRow" id="modeSwitch" aria-label="Frame style toggle">
                        <span class="pill on" id="labelCircle">Circle</span>
                        <div class="toggle" id="toggle" data-on="false" role="switch" aria-checked="false">
                          <div class="knob"></div>
                        </div>
                        <span class="pill" id="labelCorner">Banner</span>
                      </div>
                    </div>
                  </div>

                  <button id="download" class="btn" disabled>Download PNG</button>
                </div>

                <div id="status" class="small hint">Add a photo to begin.</div>
                <div id="err" class="error"></div>
              </div>

              <div class="card">
                <div class="small" style="margin-bottom: 10px;">Preview</div>
                <canvas id="c" width="1080" height="1080"></canvas>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- KEEP: Mobirise footer -->
  <section data-bs-version="5.1" class="footer2 bootcampm5 cid-v0q17rTNdN" once="footers" id="afooter2-d">
    <div class="container">
      <div class="media-container-row align-center mbr-white">
        <div class="col-12">
          <p class="mbr-text mb-0 mbr-fonts-style align-center display-4">
            <a href="https://www.facebook.com/groups/880814651207993" class="text-primary" target="_blank">Dan Daley</a><br>
            (207) 726-3370<br>
            DanDALEY.mh10@gmail.com<br>
            ADDRESS LEGALLY REQUIRED<br>
            Authorized and paid for by<br>
            I NEED THE COMMITTEE NAME
            &nbsp;&nbsp;&nbsp;<a href="privacy.html" class="text-primary">Privacy policy</a>
            &nbsp;&nbsp;&nbsp;<a href="https://austinstrat.com" class="text-primary">Austin Strategies</a>
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- KEEP: Mobirise scripts -->
  <script src="assets/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/web/assets/cookies-alert-plugin/cookies-alert-core.js"></script>
  <script src="assets/web/assets/cookies-alert-plugin/cookies-alert-script.js"></script>
  <script src="assets/smoothscroll/smooth-scroll.js"></script>
  <script src="assets/ytplayer/index.js"></script>
  <script src="assets/dropdown/js/navbar-dropdown.js"></script>
  <script src="assets/mbr-tabs/mbr-tabs.js"></script>
  <script src="assets/mbr-switch-arrow/mbr-switch-arrow.js"></script>
  <script src="assets/theme/js/script.js"></script>

  <!-- Page 2 script (unchanged logic, but scoped logo padding class to .toolBody) -->
  <script>
    (() => {
      const SIZE = 1080;

      const ASSETS = {
        circleFrame: "circle.png",
        cornerFrame: "corner.png"
      };

      const elDownload = document.getElementById("download");
      const elStatus = document.getElementById("status");
      const elErr = document.getElementById("err");

      const modeSwitch = document.getElementById("modeSwitch");
      const toggle = document.getElementById("toggle");
      const labelCircle = document.getElementById("labelCircle");
      const labelCorner = document.getElementById("labelCorner");

      const canvas = document.getElementById("c");
      const ctx = canvas.getContext("2d");

      const elFileSelfie = document.getElementById("fileSelfie");
      const elFileUpload = document.getElementById("fileUpload");
      const btnSelfie = document.getElementById("btnSelfie");
      const btnUpload = document.getElementById("btnUpload");

      let userImg = null;
      let lastBlobUrl = null;

      const cache = new Map();
      function loadImage(src) {
        if (cache.has(src)) return cache.get(src);
        const p = new Promise((resolve, reject) => {
          const img = new Image();
          img.crossOrigin = "anonymous";
          img.onload = () => resolve(img);
          img.onerror = () => reject(new Error("One of the design files is missing. Please contact the site owner."));
          img.src = src;
        });
        cache.set(src, p);
        return p;
      }

      const setError = (msg) => (elErr.textContent = msg || "");
      const setStatus = (msg) => (elStatus.textContent = msg || "");

      function getMode() {
        return toggle.dataset.on === "true" ? "corner" : "circle";
      }

      function setMode(mode) {
        const on = mode === "corner";
        toggle.dataset.on = on ? "true" : "false";
        toggle.setAttribute("aria-checked", on ? "true" : "false");
        labelCircle.classList.toggle("on", !on);
        labelCorner.classList.toggle("on", on);
      }

      function readFileAsImage(file) {
        return new Promise((resolve, reject) => {
          const url = URL.createObjectURL(file);
          const img = new Image();
          img.onload = () => { URL.revokeObjectURL(url); resolve(img); };
          img.onerror = () => { URL.revokeObjectURL(url); reject(new Error("That photo could not be opened. Please try a different image.")); };
          img.src = url;
        });
      }

      function drawCover(img, dx, dy, dw, dh) {
        const iw = img.naturalWidth || img.width;
        const ih = img.naturalHeight || img.height;
        const scale = Math.max(dw / iw, dh / ih);
        const sw = dw / scale;
        const sh = dh / scale;
        const sx = (iw - sw) / 2;
        const sy = (ih - sh) / 2;
        ctx.drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh);
      }

      function drawOverlayContain(img, overscale = 1.0) {
        const ow = img.naturalWidth || img.width;
        const oh = img.naturalHeight || img.height;
        const scale = Math.min(SIZE / ow, SIZE / oh) * overscale;
        const w = ow * scale;
        const h = oh * scale;
        const x = (SIZE - w) / 2;
        const y = (SIZE - h) / 2;
        ctx.drawImage(img, x, y, w, h);
      }

      function drawOverlayBottom(img, scaleFactor = 1.0, yNudgePx = 0) {
        const ow = img.naturalWidth || img.width;
        const oh = img.naturalHeight || img.height;
        const baseScale = Math.min(SIZE / ow, SIZE / oh);
        const scale = baseScale * scaleFactor;
        const w = ow * scale;
        const h = oh * scale;
        const x = (SIZE - w) / 2;
        const y = (SIZE - h) + yNudgePx;
        ctx.drawImage(img, x, y, w, h);
      }

      async function render() {
        setError("");
        elDownload.disabled = true;
        ctx.clearRect(0, 0, SIZE, SIZE);

        if (!userImg) {
          setStatus("Add a photo to begin.");
          return;
        }

        try {
          drawCover(userImg, 0, 0, SIZE, SIZE);

          const overlaySrc = getMode() === "circle" ? ASSETS.circleFrame : ASSETS.cornerFrame;
          const overlay = await loadImage(overlaySrc);

          if (getMode() === "corner") {
            drawOverlayBottom(overlay, 0.90, +220);
          } else {
            const OVERLAY_OVERSCALE = 1.12;
            drawOverlayContain(overlay, OVERLAY_OVERSCALE);
          }

          canvas.toBlob((blob) => {
            if (!blob) { setError("PNG export failed in this browser."); return; }
            if (lastBlobUrl) URL.revokeObjectURL(lastBlobUrl);
            lastBlobUrl = URL.createObjectURL(blob);
            elDownload.disabled = false;
            setStatus("Ready to download.");
          }, "image/png");

        } catch (e) {
          setError(e.message || String(e));
        }
      }

      function download() {
        if (!lastBlobUrl) return;
        const a = document.createElement("a");
        a.href = lastBlobUrl;
        a.download = `Voting-for-Daley.png`;
        document.body.appendChild(a);
        a.click();
        a.remove();
      }

      async function handleFilePick(ev) {
        const f = ev.target.files && ev.target.files[0];
        ev.target.value = "";
        if (!f) return;

        try {
          userImg = await readFileAsImage(f);
          await render();
        } catch (e) {
          userImg = null;
          setError(e.message || String(e));
        }
      }

      btnSelfie.addEventListener("click", () => elFileSelfie.click());
      btnUpload.addEventListener("click", () => elFileUpload.click());
      elFileSelfie.addEventListener("change", handleFilePick);
      elFileUpload.addEventListener("change", handleFilePick);

      modeSwitch.addEventListener("click", async () => {
        setMode(getMode() === "circle" ? "corner" : "circle");
        await render();
      });

      elDownload.addEventListener("click", download);

      setMode("circle");
      setStatus("Add a photo to begin.");

      // Logo load detection now toggles the class on the tool container (NOT body)
      const logo = document.getElementById("siteLogo");
      const toolBody = document.querySelector("#profile-tool .toolBody");
      if (logo && toolBody) {
        logo.addEventListener("load", () => toolBody.classList.add("hasLogo"));
        logo.addEventListener("error", () => {
          toolBody.classList.remove("hasLogo");
          logo.style.display = "none";
        });
        if (logo.complete && logo.naturalWidth > 0) {
          toolBody.classList.add("hasLogo");
        }
      }
    })();
  </script>

  <input name="cookieData" type="hidden"
    data-cookie-cookiesAlertType='1'
    data-cookie-customDialogSelector='null'
    data-cookie-colorText='#424a4d'
    data-cookie-colorBg='rgb(255, 255, 255)'
    data-cookie-opacityOverlay='0'
    data-cookie-bgOpacity='27'
    data-cookie-textButton='OK'
    data-cookie-rejectText='REJECT'
    data-cookie-colorButton='#ea0000'
    data-cookie-rejectColor='#ffffff'
    data-cookie-colorLink='#424a4d'
    data-cookie-underlineLink='true'
    data-cookie-text="We use cookies to give you the best experience as specified in the <a href='privacy.html'>cookie policy</a>.">
  <div id="scrollToTop" class="scrollToTop mbr-arrow-up">
    <a style="text-align: center;">
      <i class="mbr-arrow-up-icon mbr-arrow-up-icon-cm cm-icon cm-icon-smallarrow-up"></i>
    </a>
  </div>
  <input name="animation" type="hidden">

</body>
</html>
